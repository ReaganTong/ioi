<?xml version="1.0" encoding="utf-8" ?>
    
<TabbedPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:vm="clr-namespace:mobile_app.ViewModels"
            x:Class="mobile_app.Views.AdminPage"
            Title="Admin Panel"
            SelectedTabColor="{StaticResource PrimaryColor}"
            UnselectedTabColor="Gray">

    <ContentPage Title="Reports" IconImageSource="dotnet_bot.png">
        <RefreshView IsRefreshing="{Binding IsRefreshing}" Command="{Binding LoadReportsCommand}">
            <CollectionView ItemsSource="{Binding Reports}" Margin="10">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="0,5" Padding="10" BorderColor="Gray" CornerRadius="8">
                            <VerticalStackLayout Spacing="5">
                                <Label Text="{Binding CreatedAt, StringFormat='{0:MMM dd, HH:mm}'}" TextColor="Gray" FontSize="12"/>
                                <Label Text="{Binding Description}" FontAttributes="Bold" FontSize="16" LineBreakMode="WordWrap"/>
                                <Label Text="{Binding Location}" TextColor="Blue" FontSize="12"/>

                                <HorizontalStackLayout Spacing="10" Margin="0,10,0,0">
                                    <Label Text="{Binding Status}" 
                                           TextColor="Black" 
                                           FontAttributes="Bold"
                                           VerticalOptions="Center"/>

                                    <Button Text="Mark Resolved" 
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type vm:AdminViewModel}}, Path=MarkResolvedCommand}"
                                            CommandParameter="{Binding .}"
                                            HeightRequest="35"
                                            FontSize="12"
                                            BackgroundColor="Green"
                                            TextColor="White"/>
                                </HorizontalStackLayout>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </RefreshView>
    </ContentPage>

    <ContentPage Title="Post News" IconImageSource="dotnet_bot.png">
        <VerticalStackLayout Padding="20" Spacing="15">
            <Label Text="Create News Announcement" FontSize="20" FontAttributes="Bold" />

            <Entry Placeholder="News Title" Text="{Binding NewsTitle}" />

            <Frame BorderColor="Gray" CornerRadius="5" Padding="5">
                <Editor Placeholder="News Description" 
                        Text="{Binding NewsDescription}" 
                        HeightRequest="150" 
                        AutoSize="TextChanges"/>
            </Frame>

            <Button Text="Publish News" 
                    Command="{Binding UploadNewsCommand}" 
                    BackgroundColor="{StaticResource PrimaryColor}" 
                    TextColor="White"/>
        </VerticalStackLayout>
    </ContentPage>

</TabbedPage>